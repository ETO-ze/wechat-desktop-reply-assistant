# WeChat Desktop Reply Assistant (wechat-desktop-reply-assistant)

> **版本**：v6 稳定版 – 标题 OCR 路由、左侧消息触发、自动生成草稿但默认不自动发送。

该项目旨在在 **Windows** 桌面环境下为微信客户端提供“半自动化”辅助回复功能。工具通过屏幕截图和 OCR 技术识别对方新消息，然后调用 LLM（可选）生成回复草稿，并在用户确认后发送。设计目标是降低风险：**不注入、不修改微信协议、不默认自动发送。**

本仓库当前包含核心脚本 `wechat_auto_bot_single_v6_stable_resend.py`，并提供安装指南、使用手册及故障排除文档。

## 项目特点

- **视觉差分 + OCR 新消息检测**：多层门控确保只有在聊天窗口左侧出现新文字时才触发回复。
- **会话自动路由**：识别聊天标题，以便不同联系人之间维持独立的对话上下文。
- **默认安全策略**：Arm 武装后才会监听；自动回复默认关闭；发送前需热键确认。可自行修改为全自动，但存在高风险。
- **可扩展配置**：JSON 配置文件提供丰富参数，方便校准截图区域、差分阈值、速率限制等。
- **Gemini / OpenAI 兼容接口**：可选择 Google Gemini 或 OpenAI 作为回复生成后端，亦可替换为其他兼容服务。

## 文档一览

| 文件              | 功能说明                                                    |
|------------------|-------------------------------------------------------------|
| **INSTALL.md**       | 依赖安装、虚拟环境创建、Tesseract 安装与配置步骤           |
| **USER_GUIDE.md**    | 快捷键说明、推荐工作流、配置亮点和使用建议                 |
| **TROUBLESHOOTING.md** | 常见问题解答、故障排除办法、性能调优建议                 |

阅读这些文档将帮助你快速完成安装与校准，并掌握工具的工作原理。

## 快速上手

1. 按照 **INSTALL.md** 完成依赖安装与 Tesseract 配置，并运行脚本生成配置文件。
2. 按 `Ctrl+Alt+C` 保存校准截图，根据截图调整 `regions.title` 和 `regions.message` 区域。
3. 按 `Ctrl+Alt+S` Arm 武装，然后根据需要按 `Ctrl+Alt+A` 开启 AutoReply。
4. 当脚本识别到新消息时会自动生成草稿并粘贴到输入框。按 `Ctrl+Alt+Y` 可确认发送。

## 安全与合规提示

- 请遵守微信平台的使用条款。任何形式的自动化行为均可能被平台检测到并受限。本工具提供的安全机制（Arm、确认发送）旨在降低误触发风险，**并不能保证免受封控或处罚**。
- 留意个人隐私保护：本工具会保存校准截图和日志，确保这些文件不包含敏感信息或不要上传到公开仓库。

## 协议与贡献

- 本项目代码以 MIT 许可证发布，欢迎提交 Issue 和 Pull Request 共同改进。
- 提交贡献时请勿包含真实的聊天记录、个人密钥或含有敏感信息的日志。

如需更多信息，请查阅 **安装指南**、**使用指南** 和 **故障排除** 文档。
